<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carma Form</title>
    <link rel="stylesheet" href="./page2.css">
    <script defer src="./page2.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-database.js"></script>

</head>

<body>
    <div class="header">
        <div class="logo"></div>
          <h1>carma</h1>
    </div>

    <div class="container">
        <form id="form" action="./page3.html" method="GET">
        
            <div class="input-control" id="all">
                <label for="firstname" class="heading">First Name</label>
                <input id="firstname" name="firstname" type="text" placeholder="First Name">
                <div class="error"></div>
            </div>

            <div class="input-control" id="all">
                <label for="lastname" class="heading">Last Name</label>
                <input id="lastname" name="lastname" type="text" placeholder="Last Name">
                <div class="error"></div>
            </div>

            <div class="input-control" id="all">
                <label for="email" class="heading">Email</label>
                <input id="email" name="email" type="email" placeholder="Email">
                <div class="error"></div>
            </div>

            <div class="input-control" id="all">
                <label for="tely" class="heading">Phone Number</label>
                <input id="tely" name="tely" type="tel" placeholder="Phone Number">
                <div class="error"></div>
            </div>

            <button id="btn" class="Start-btn" type="submit" value="submit">Next</button>
        </form>
        
    </div> 



<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import {getDatabase, ref, set, get, child} from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
  apiKey: "AIzaSyAO92U_qjWw9L2v-xnJf_Z-U8x1eOQRhQw",
  authDomain: "carma6-bfe90.firebaseapp.com",
  projectId: "carma6-bfe90",
  storageBucket: "carma6-bfe90.appspot.com",
  messagingSenderId: "424736990719",
  appId: "1:424736990719:web:414fd8e8de79d01818b3ca"
};
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);


    // get ref to database services
    const db = getDatabase(app);

    document.getElementById("btn").addEventListener('click', function(e){
        form.addEventListener('submit', e =>{

validateInputs();

console.log(isFormValid());
if(isFormValid()==true){
    form.submit() ;
    alert("thanks");
 }else {
     e.preventDefault();
     alert("Please fill out the form correctly.");
 }

});

        set(ref(db, 'information/' + document.getElementById("firstname").value),
        {
            FirstName: document.getElementById("firstname").value,
            LastName: document.getElementById("lastname").value,
            Email: document.getElementById("email").value,
            PhoneNumber: document.getElementById("tely").value
        });
        
    })
  </script>

</body>
</html>